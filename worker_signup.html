<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SkillConnect | Worker Registration</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Karla:wght@400;600&display=swap" rel="stylesheet">

<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>

<script>
// ✅ Firebase Config
const firebaseConfig = {
apiKey: "AIzaSyD6Kn44-ilM8DoCrzUFwoVYyd4GmuDcsFE",
authDomain: "skillconnect-f6632.firebaseapp.com",
projectId: "skillconnect-f6632",
storageBucket: "skillconnect-f6632.appspot.com",
messagingSenderId: "462430536837",
appId: "1:462430536837:web:4e6a791ca9b462a29895ec",
measurementId: "G-VY0EH70WR9"
};

const app = firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();
</script>

<style>
:root {
--color-primary-dark: #8b7454;
--color-primary-light: #cfa874;
--color-background-soft: #fbfbf7;
--color-card-bg: #ffffff;
--color-text-dark: #3a332d;
--color-text-muted: #70685e;
--color-border: #e0d9cf;
--font-heading: 'Playfair Display', serif;
--font-body: 'Karla', sans-serif;
}

body {
margin: 0;
font-family: var(--font-body);
background-color: var(--color-background-soft);
color: var(--color-text-dark);
line-height: 1.6;
min-height: 100vh;
display: flex;
flex-direction: column;
background-image: url('data:image/svg+xml;utf8,<svg width="40" height="40" xmlns="http://www.w3.org/2000/svg"><g fill="%23e0d9cf" fill-opacity="0.2"><path d="M0 40L40 0H20L0 20V40ZM40 40V20L20 40H40Z"/></g></svg>');
background-size: 40px 40px;
}

.container {
width: 100%;
max-width: 1400px;
margin: 0 auto;
padding: 0 40px;
flex-grow: 1;
}

.site-header {
background-color: var(--color-card-bg);
padding: 20px 40px;
border-bottom: 1px solid var(--color-border);
display: flex;
justify-content: space-between;
align-items: center;
box-shadow: 0 2px 8px rgba(0, 0, 0, 0.03);
}

.logo {
font-family: var(--font-heading);
font-size: 2rem;
font-weight: 700;
color: var(--color-primary-dark);
text-decoration: none;
}

.logo span {
color: var(--color-primary-light);
}

.page-banner {
text-align: center;
padding: 80px 40px 60px;
background-color: var(--color-card-bg);
border-bottom: 1px solid var(--color-border);
margin-bottom: 40px;
}

.page-banner h1 {
font-family: var(--font-heading);
font-size: 3.2rem;
color: var(--color-primary-dark);
margin-bottom: 10px;
}

.intro-box {
max-width: 900px;
margin: 30px auto 0;
padding: 20px 30px;
background-color: var(--color-background-soft);
border-left: 5px solid var(--color-primary-light);
color: var(--color-text-muted);
font-style: italic;
font-size: 1.1rem;
}

.intro-box p strong {
color: var(--color-primary-dark);
font-style: normal;
}

form {
max-width: 950px;
margin: 0 auto 80px;
padding: 60px;
background-color: var(--color-card-bg);
border-radius: 12px;
border: 1px solid var(--color-border);
box-shadow: 0 15px 35px rgba(0, 0, 0, 0.05);
}

form h2 {
text-align: center;
font-family: var(--font-heading);
color: var(--color-primary-dark);
margin-bottom: 40px;
border-bottom: 2px dashed var(--color-border);
padding-bottom: 10px;
}

.form-group {
display: grid;
grid-template-columns: repeat(3, 1fr);
gap: 25px 30px;
margin-bottom: 25px;
}

.form-group > div.span-2 {
grid-column: span 2;
}

.form-group > div.span-3 {
grid-column: span 3;
}

label {
display: block;
font-weight: 600;
margin-bottom: 6px;
color: var(--color-text-dark);
}

input, select, textarea {
width: 100%;
padding: 12px 16px;
border: 1px solid var(--color-border);
border-radius: 6px;
font-size: 1rem;
background-color: var(--color-background-soft);
box-sizing: border-box;
transition: all 0.2s ease-in-out;
}

input:focus, select:focus, textarea:focus {
border-color: var(--color-primary-light);
box-shadow: 0 0 0 2px rgba(207, 168, 116, 0.4);
}

button {
width: 100%;
padding: 15px;
background-color: var(--color-primary-dark);
border: none;
color: var(--color-card-bg);
font-size: 1.15rem;
font-weight: 700;
border-radius: 6px;
cursor: pointer;
transition: all 0.3s ease;
margin-top: 20px;
}

button:hover {
background-color: var(--color-primary-light);
}

footer {
text-align: center;
padding: 30px;
background-color: var(--color-card-bg);
border-top: 1px solid var(--color-border);
color: var(--color-text-muted);
}

/* Responsive */
@media (max-width: 992px) {
.form-group {
grid-template-columns: 1fr 1fr;
}
.form-group > div.span-3 {
grid-column: span 2;
}
}

@media (max-width: 600px) {
.form-group {
grid-template-columns: 1fr;
}
.form-group > div.span-2,
.form-group > div.span-3 {
grid-column: span 1;
}
}

/* Profile photo preview */
.photo-preview {
width: 100%;
max-height: 150px;
border-radius: 8px;
object-fit: cover;
margin-top: 8px;
border: 1px solid var(--color-border);
display: none;
}
</style>
</head>

<body>
<div class="site-header">
<a href="#" class="logo">Skill<span>Connect</span></a>
</div>

<div class="container">
<header class="page-banner">
<h1>Worker Registration</h1>
<div class="intro-box">
<p><strong>Hello.</strong> We're seeking <em>Masterful Craftspeople</em> ready to showcase their expertise. If your skill is your signature and your reputation is your currency, you've found your home. Tell us about the work that sets you apart.</p>
</div>
</header>

<form id="worker-registration-form">
<h2>Create Your Profile</h2>

<div class="form-group">
<div>
<label for="name">Full Name</label>
<input type="text" id="name" placeholder="Enter your full name" required>
</div>

<div>
<label for="email">Email Address</label>
<input type="email" id="email" placeholder="Your primary contact email" required>
</div>

<div>
<label for="password">Account Password</label>
<input type="password" id="password" placeholder="Create a strong password" required minlength="6">
</div>

<div>
<label for="phone">Phone Number</label>
<input type="tel" id="phone" placeholder="Contact number for clients" required>
</div>

<div>
<label for="city">City</label>
<input type="text" id="city" placeholder="e.g., Hyderabad" required>
</div>

<div>
<label for="area">Area / Locality</label>
<input type="text" id="area" placeholder="e.g., Chandanagar, Gachibowli" required>
</div>

<div class="span-2">
<label for="category">Core Skill Category</label>
<select id="category" required>
<option value="">Select your specialisation...</option>
<option>Plumbing & HVAC</option>
<option>Electrical Services</option>
<option>Culinary Arts/Catering</option>
<option>Tutoring/Academic Coaching</option>
<option>Web & Software Development</option>
<option>Graphic & Product Design</option>
<option>Carpentry/Renovation</option>
<option>Other Niche Trade</option>
</select>
</div>

<div>
<label for="photo">Profile Photo URL</label>
<input type="text" id="photo" placeholder="Paste public image URL here" required>
<img id="photoPreview" class="photo-preview" alt="Profile Preview">
</div>

<div class="span-3">
<label for="bio">Worker Bio</label>
<textarea id="bio" rows="4" placeholder="Highlight your experience, certifications, and what makes your work exceptional (Min. 50 words)" required></textarea>
</div>
</div>

<button type="submit" id="register-button">Sign Up and Launch Your Profile</button>
</form>
</div>

<footer>
&copy; 2025 SkillConnect. Connecting talent, creating opportunities.
</footer>

<script>
// ✅ Preview profile photo
document.getElementById('photo').addEventListener('input', function () {
const url = this.value.trim();
const preview = document.getElementById('photoPreview');
if (url && (url.startsWith('http') || url.startsWith('https'))) {
preview.src = url;
preview.style.display = 'block';
} else {
preview.style.display = 'none';
}
});

// ✅ Form submission
document.getElementById('worker-registration-form').addEventListener('submit', async function(event) {
event.preventDefault();

// FIX: Explicitly get all elements by ID to avoid 'TypeError: Cannot read properties of undefined'
const nameInput = document.getElementById('name');
const emailInput = document.getElementById('email');
const passwordInput = document.getElementById('password');
const phoneInput = document.getElementById('phone');
const cityInput = document.getElementById('city');
const areaInput = document.getElementById('area');
const categoryInput = document.getElementById('category');
const bioInput = document.getElementById('bio');
const photoInput = document.getElementById('photo');

const formData = {
name: nameInput.value.trim(),
email: emailInput.value.trim(),
password: passwordInput.value.trim(),
phone: phoneInput.value.trim(),
city: cityInput.value.trim(),
area: areaInput.value.trim(),
category: categoryInput.value,
bio: bioInput.value.trim(),
photo_url: photoInput.value.trim(),
registered_on: new Date()
};

if (Object.values(formData).some(v => !v)) {
alert("Please fill out all fields.");
return;
}

if (formData.password.length < 6) {
alert("Password must be at least 6 characters.");
return;
}

if (formData.bio.length < 50) {
alert("Bio must be at least 50 characters long.");
return;
}

try {
const docRef = await db.collection("workers").add(formData);
alert("✅ Registration successful! Your profile ID: " + docRef.id);
document.getElementById('worker-registration-form').reset();
document.getElementById('photoPreview').style.display = 'none';
} catch (error) {
console.error("Error adding document: ", error);
alert("❌ Registration failed. Check console for details. (Note: Using Firebase Auth for secure registration is highly recommended.)");
}
});
</script>
</body>
</html>